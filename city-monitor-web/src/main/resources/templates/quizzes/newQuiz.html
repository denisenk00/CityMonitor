<!DOCTYPE html>
<html lang="uk" xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Creating quiz</title>
</head>
<body>
    <div th:insert="header.html"></div>
    <div class="container-fluid">
        <h1>Нове опитування</h1>
        <form th:action="/quizzes" th:object="${quiz}" th:method="POST">
            <div class="form-floating">
                <textarea class="form-control" placeholder="Введіть тему опитування" id="titleInput" style="height: 100px" th:field="*{title}"></textarea>
                <label for="titleInput" class="form-label"></label>
            </div>
            <input class="form-check-input" type="checkbox" id="startImmediate" checked>
            <label class="form-check-label" for="startImmediate">Почати опитування відразу</label>
            <div id="startDateFragment">
                <div class='input-group date' id='startDatePicker'>
                    <input type='text' class="form-control"/>
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
            <div id="endDateFragment">
                <div class='input-group date' id='endDatePicker'>
                    <input type='text' class="form-control"/>
                    <span class="input-group-addon">
                        <span class="glyphicon glyphicon-calendar"></span>
                    </span>
                </div>
            </div>
            <div class="file-upload-wrapper">
                <input type="file" id="input-file-now-custom-2" class="file-upload"
                       data-height="500" />
            </div>
            <div>
                <label class="form-check-label" for="layoutSelector">Почати опитування відразу</label>
                <select class="selectpicker" id="layoutSelector" data-live-search="true" th:each="layout : ${layouts}">
                    <option th:text="${layout.name}" value="${layout.layoutId}"></option>
                </select>
            </div>
        </form>
    </div>
</body>
</html>
<script>
    var rating = 0;

    document.getElementById('addRating').addEventListener('click', function () {
        var ratingsElem = document.getElementById('ratings');

        var sourceElem = document.createElement("input");
        sourceElem.setAttribute('type', 'text');
        sourceElem.setAttribute('placeholder', 'Source');
        sourceElem.setAttribute('name', 'Ratings[' + rating + '][Source]');

        var valueElem = document.createElement("input");
        valueElem.setAttribute('type', 'text');
        valueElem.setAttribute('placeholder', 'value');
        valueElem.setAttribute('name', 'Ratings[' + rating +  '][Value]');

        ratingsElem.appendChild(sourceElem);
        ratingsElem.appendChild(valueElem);

        rating++;
    });
</script>

<script type="text/javascript">
    $(function () {
        $('#startDatePicker').datetimepicker();
        $('#endDateFragment').datetimepicker({
            useCurrent: false //Important! See issue #1075
        });
        $("#startDatePicker").on("dp.change", function (e) {
            $('#endDateFragment').data("DateTimePicker").minDate(e.date);
        });
        $("#endDateFragment").on("dp.change", function (e) {
            $('#startDatePicker').data("DateTimePicker").maxDate(e.date);
        });
    });
</script>

<script>$('.file-upload').file_upload();</script>